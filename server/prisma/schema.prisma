generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model ActividadCliente {
  actividadID    Int       @id(map: "PK__Activida__E4EF86949FA441E5") @default(autoincrement())
  clienteID      Int?
  ultimaConexion DateTime? @db.DateTime
  ultimaCitaID   Int?
  Usuarios       Usuarios? @relation(fields: [clienteID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_ActividadCliente_clienteID")
  Citas          Citas?    @relation(fields: [ultimaCitaID], references: [citaID], onDelete: NoAction, onUpdate: NoAction, map: "fk_ActividadCliente_ultimaCitaID")
}

model BitacoraCliente {
  bitacoraID    Int       @id(map: "PK__Bitacora__43BC1FDF08E1DC04") @default(autoincrement())
  clienteID     Int?
  fechaRegistro DateTime? @db.DateTime
  Usuarios      Usuarios? @relation(fields: [clienteID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_bitacoraClientes_clienteID")
}

model BitacoraEstilista {
  bitacoraID   Int       @id(map: "PK__Bitacora__43BC1FDF6A240AE4") @default(autoincrement())
  estilistaID  Int?
  fechaIngreso DateTime? @db.Date
  fechaSalida  DateTime? @db.Date
  Usuarios     Usuarios? @relation(fields: [estilistaID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_bitacoraEstilistas_estilistaID")
}

model BloqueoHorarios {
  bloqueoID   Int       @id(map: "PK__BloqueoH__3314B8A091C551DD") @default(autoincrement())
  estilistaID Int?
  dia         String?   @db.VarChar(20)
  horaInicio  DateTime? @db.Time
  horaFinal   DateTime? @db.Time
  motivo      String?   @db.VarChar(150)
  Usuarios    Usuarios? @relation(fields: [estilistaID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_BloqueoHorarios_estilistaID")
}

model Citas {
  citaID                               Int                 @id(map: "PK__Citas__A9534FECD64FD7E3") @default(autoincrement())
  clienteID                            Int?
  estilistaID                          Int?
  comentarios                          String?             @db.VarChar(150)
  estadoID                             Int?
  fechaCita                            DateTime?           @db.Date
  horaCita                             DateTime?           @db.Time
  servicioCita                         String?             @db.VarChar(20)
  ActividadCliente                     ActividadCliente[]
  Usuarios_Citas_clienteIDToUsuarios   Usuarios?           @relation("Citas_clienteIDToUsuarios", fields: [clienteID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_Citas_clienteID")
  EstadoCita                           EstadoCita?         @relation(fields: [estadoID], references: [estadoID], onDelete: NoAction, onUpdate: NoAction, map: "fk_Citas_estadoID")
  Usuarios_Citas_estilistaIDToUsuarios Usuarios?           @relation("Citas_estilistaIDToUsuarios", fields: [estilistaID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_Citas_estilistaID")
  HistorialCitas                       HistorialCitas[]
  HorariosReservados                   HorariosReservados?
}

model EstadoCita {
  estadoID Int     @id(map: "PK__EstadoCi__C696F363F5376FA9") @default(autoincrement())
  nombre   String? @db.VarChar(50)
  Citas    Citas[]
}

model HistorialCitas {
  historialCitasID Int       @id(map: "PK__Historia__1E8361EE82FFD90E") @default(autoincrement())
  clienteID        Int?
  citaID           Int?
  Citas            Citas?    @relation(fields: [citaID], references: [citaID], onDelete: NoAction, onUpdate: NoAction, map: "fk_HistorialCitas_citaID")
  Usuarios         Usuarios? @relation(fields: [clienteID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_HistorialCitas_clienteID")
}

model HistorialRecompensas {
  historialID     Int        @id(map: "PK__Historia__68FB3544E7F3F580") @default(autoincrement())
  clienteID       Int?
  servicioID      Int?
  puntosCanjeados Int?
  fecha           DateTime?  @db.DateTime
  Usuarios        Usuarios?  @relation(fields: [clienteID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_HistorialRecompensas_clienteID")
  Servicios       Servicios? @relation(fields: [servicioID], references: [servicioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_HistorialRecompensas_servicioID")
}

model Horarios {
  horariosID  Int       @id(map: "PK__Horarios__5B414E6F0C757FB4") @default(autoincrement())
  estilistaID Int?
  diaSemana   String?   @db.VarChar(20)
  horaInicio  DateTime? @db.Time
  horaFinal   DateTime? @db.Time
  Usuarios    Usuarios? @relation(fields: [estilistaID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_Horarios_estilistaID")
}

model HorariosReservados {
  citaID      Int       @id(map: "PK__Horarios__A9534FEC57ACF13B") @default(autoincrement())
  dia         DateTime? @db.Date
  hora_inicio DateTime? @db.Time
  hora_fin    DateTime? @db.Time
  Citas       Citas     @relation(fields: [citaID], references: [citaID], onUpdate: NoAction, map: "fk_HorariosReservados_citaID")
}

model PuntosClientes {
  puntosID         Int       @id(map: "PK__PuntosCl__DC505A371D081791") @default(autoincrement())
  clienteID        Int?
  puntosAcumulados Int?
  puntosCanjeados  Int?
  Usuarios         Usuarios? @relation(fields: [clienteID], references: [usuarioID], onDelete: NoAction, onUpdate: NoAction, map: "fk_PuntosClientes_clienteID")
}

model PuntosServicio {
  servicioID      Int       @id(map: "PK__PuntosSe__65FD6B29A332B52A") @default(autoincrement())
  puntosGenerados Int?
  Servicios       Servicios @relation(fields: [servicioID], references: [servicioID], onUpdate: NoAction, map: "fk_PuntosServicio_servicioID")
}

model Roles {
  rolID     Int        @id(map: "PK__Roles__5402365493D719B4") @default(autoincrement())
  nombreRol String?    @db.VarChar(25)
  Usuarios  Usuarios[]
}

model Servicios {
  servicioID           Int                    @id(map: "PK__Servicio__65FD6B29878B0AFF") @default(autoincrement())
  nombreServicio       String?                @db.VarChar(50)
  descripcion          String?                @db.VarChar(255)
  tiempoEstimado       DateTime?              @db.Time
  precio               Int?
  rutaImagen           String?                @db.VarChar(150)
  HistorialRecompensas HistorialRecompensas[]
  PuntosServicio       PuntosServicio?
}

model Usuarios {
  usuarioID                         Int                    @id(map: "PK__Usuarios__A5B1ABAE3DB4F188") @default(autoincrement())
  nombre                            String                 @db.VarChar(50)
  apellidos                         String                 @db.VarChar(50)
  telefono                          String?                @db.VarChar(20)
  correo                            String                 @unique(map: "UQ_Usuarios_correo") @db.VarChar(100)
  direccion                         String?                @db.VarChar(255)
  contra                            String                 @db.VarChar(60)
  rolID                             Int?
  estado                            String?                @db.VarChar(15)
  ActividadCliente                  ActividadCliente[]
  BitacoraCliente                   BitacoraCliente[]
  BitacoraEstilista                 BitacoraEstilista[]
  BloqueoHorarios                   BloqueoHorarios[]
  Citas_Citas_clienteIDToUsuarios   Citas[]                @relation("Citas_clienteIDToUsuarios")
  Citas_Citas_estilistaIDToUsuarios Citas[]                @relation("Citas_estilistaIDToUsuarios")
  HistorialCitas                    HistorialCitas[]
  HistorialRecompensas              HistorialRecompensas[]
  Horarios                          Horarios[]
  PuntosClientes                    PuntosClientes[]
  Roles                             Roles?                 @relation(fields: [rolID], references: [rolID], onDelete: NoAction, onUpdate: NoAction, map: "fk_Usuarios_rolID")
}

model Cupones {
  cuponID     Int     @id(map: "PK__Cupones__9FC50856E106C4DC") @default(autoincrement())
  nombreCupon String? @db.VarChar(100)
  valorPuntos Int?
  estado      String? @db.VarChar(15)
}
